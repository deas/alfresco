<component>
    <name>tomcatwriteproperties</name>
    <description>//Tomcat Write Properties</description>
    <canBeEdited>0</canBeEdited>
    <show>0</show>
    <selected>1</selected>
    <readyToInstallActionList>
        <actionGroup>
            <actionList>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_server_port</key>
                    <variable>application_server_port</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_server_ssl_port</key>
                    <variable>application_server_ssl_port</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_server_shutdown_port</key>
                    <variable>application_server_shutdown_port</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_server_ajp_port</key>
                    <variable>application_server_ajp_port</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_root_directory</key>
                    <variable>application_server_directory</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_domainname</key>
                    <variable>application_server_domain</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_configuration_directory</key>
                    <variable>application_server_conf_directory</variable>
                </iniFileGet>
                <iniFileGet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_unique_service_name</key>
                    <variable>tomcat_unique_service_name</variable>
                    <ruleList>
                        <platformTest type="windows"/>
                    </ruleList>
                </iniFileGet>
                <actionGroup>
                    <actionList>
                        <iniFileGet>
                            <file>${installdir}/properties.ini</file>
                            <section>Tomcat</section>
                            <key>tomcat_user</key>
                            <variable>tomcat_user</variable>
                        </iniFileGet>
                        <setInstallerVariable name="tomcat_user" value="tomcat" >
                            <ruleList>
                                <compareText text="${tomcat_user}" logic="equals" value=""/>
                            </ruleList>
                        </setInstallerVariable>
                        <iniFileGet>
                            <file>${installdir}/properties.ini</file>
                            <section>Tomcat</section>
                            <key>tomcat_group</key>
                            <variable>tomcat_group</variable>
                        </iniFileGet>
                        <setInstallerVariable name="tomcat_group" value="tomcat" >
                            <ruleList>
                                <compareText text="tomcat_group" logic="equals" value=""/>
                            </ruleList>
                        </setInstallerVariable>
                    </actionList>
                </actionGroup>
            </actionList>
            <ruleList>
                <fileExists path="${installdir}/properties.ini"/>
            </ruleList>
        </actionGroup>
    </readyToInstallActionList>
    <postInstallationActionList>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_server_port</key>
            <value>${application_server_port}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_server_ssl_port</key>
            <value>${application_server_ssl_port}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_server_shutdown_port</key>
            <value>${application_server_shutdown_port}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_server_ajp_port</key>
            <value>${application_server_ajp_port}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_root_directory</key>
            <value>${application_server_directory}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_domainname</key>
            <value>${application_server_domain}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_configuration_directory</key>
            <value>${application_server_conf_directory}</value>
        </iniFileSet>
        <iniFileSet>
            <file>${installdir}/properties.ini</file>
            <section>Tomcat</section>
            <key>tomcat_unique_service_name</key>
            <value>${tomcat_unique_service_name}</value>
            <ruleList>
                <platformTest type="windows"/>
            </ruleList>
        </iniFileSet>
        <actionGroup>
            <actionList>
                <iniFileSet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_group</key>
                    <value>${tomcat_group}</value>
                </iniFileSet>
                <iniFileSet>
                    <file>${installdir}/properties.ini</file>
                    <section>Tomcat</section>
                    <key>tomcat_user</key>
                    <value>${tomcat_user}</value>
                </iniFileSet>
            </actionList>
            <ruleList>
                <platformTest type="unix" />
            </ruleList>
        </actionGroup>
    </postInstallationActionList>
</component>

