<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="
               http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
            http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

    <import resource="classpath:alfresco/cxf/cxf.xml" />
    <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

    <bean id="fileTypeIconRetriever" class="org.alfresco.repo.cmis.ws.FileTypeIconRetrieverImpl">
        <property name="mimetypeForSmall">
            <value>image/gif</value>
        </property>
        <property name="mimetypeForMedium">
            <value>image/gif</value>
        </property>
    </bean>

    <!-- ========================================================================================================= -->

    <bean id="saajInInterceptor" class="org.apache.cxf.binding.soap.saaj.SAAJInInterceptor" />

    <bean id="saajOutInterceptor" class="org.apache.cxf.binding.soap.saaj.SAAJOutInterceptor" />

    <bean id="checkPasswordTypeInterceptor" class="org.alfresco.repo.cmis.ws.PasswordTypeInterceptor" />

    <bean id="wss4jInInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
        <constructor-arg>
            <map>
                <entry key="action" value="UsernameToken Timestamp" />
                <entry key="passwordType" value="PasswordText" />
                <entry>
                    <key>
                        <value>passwordCallbackRef</value>
                    </key>
                    <ref local="authenticationTokenCallback" />
                </entry>
            </map>
        </constructor-arg>
    </bean>

    <bean id="wss4jOutInterceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor">
        <constructor-arg>
            <map>
                <entry key="action" value="Timestamp" />
                <entry key="mustUnderstand" value="false" />
            </map>
        </constructor-arg>
    </bean>

    <bean id="wss4jOutInterceptorWithMTOM" class="org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor">
        <constructor-arg>
            <map>
                <entry key="action" value="Timestamp" />
                <entry key="mustUnderstand" value="false" />
            </map>
        </constructor-arg>
        <property name="allowMTOM" value="true" />
    </bean>

    <bean id="authenticationTokenCallback" class="org.alfresco.repo.cmis.ws.AuthenticationTokenCallbackHandler" />

    <bean id="authenticationInterceptor" class="org.alfresco.repo.cmis.ws.AuthenticationInterceptor">
      <property name="authenticationService" ref="authenticationService" />
      <property name="transactionService" ref="transactionService" />
    </bean>

    <bean id="authenticationClearInterceptor" class="org.alfresco.repo.cmis.ws.AuthenticationClearInterceptor"/>

</beans>